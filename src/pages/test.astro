---

import BaseLayout from "../layouts/BaseLayout.astro";
import NavBar from "../components/NavBar.astro";
import Footer from "../components/Footer.astro";
import Cubes from "../components/Cubes.tsx";

---

<BaseLayout title="Playgent Test — Expert Consulting for AI Agent Testing">
  <NavBar />
  <main>
    <!-- Hero Section -->
    <section id="hero" class="section" style="padding-top:160px;padding-bottom:40px;position:relative;overflow:hidden;">
      <div class="container">
        <div class="hero-box" style="border-left:1px solid var(--border);border-right:1px solid var(--border);padding:64px;background:var(--box-bg);display:grid;grid-template-columns:1fr 1.1fr;gap:64px;align-items:center;position:relative;z-index:10;">
          <div>
            <p class="eyebrow" style="margin-bottom:20px;">Playgent Vanguard</p>
            <h1 style="margin-bottom:24px;">Ship agents with confidence.</h1>
            <p class="lead" style="margin-bottom:12px;">
              <span id="typed-text"></span><span id="cursor" style="animation:blink 1s infinite;">|</span>
            </p>
            <p style="color:var(--muted);margin:0;font-size:17px;">We build robust testing environments tailored to your conversational AI use cases.</p>
          </div>
          <div style="display:flex;justify-content:center;align-items:center;">
            <div style="width:70%;max-width:400px;">
              <Cubes 
                client:load
                gridSize={4}
                autoAnimate={true}
                borderStyle="1px solid #00e5ff"
                faceColor="rgba(0, 229, 255, 0.05)"
                rippleColor="#00e5ff"
                rippleOnClick={true}
                maxAngle={35}
                radius={3.5}
              />
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- How It Works Section -->
    <section id="how" class="section" style="padding-top:40px;">
      <div class="container">
        <div class="how-box" style="border-left:1px solid var(--border);border-right:1px solid var(--border);position:relative;">
          
          <div class="step-item">
            <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
              <div style="width:40px;height:40px;display:grid;place-items:center;border:1px solid var(--accent);background:var(--accent-bg);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                </svg>
              </div>
              <strong style="font-size:20px;">Understanding Your Use Cases</strong>
            </div>
            <p style="color:var(--muted);margin-bottom:32px;">We start by deeply understanding your conversational AI use cases, user personas, and business requirements.</p>
            
            <div class="discovery-steps">
              <div class="discovery-card">
                <div class="discovery-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                  </svg>
                </div>
                <h4>Interview Stakeholders</h4>
                <p>Deep-dive sessions with your team to understand requirements and constraints</p>
              </div>

              <div class="discovery-card">
                <div class="discovery-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                  </svg>
                </div>
                <h4>Analyze Agent Behavior</h4>
                <p>Map out current agent flows, decision points, and interaction patterns</p>
              </div>

              <div class="discovery-card">
                <div class="discovery-icon">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                    <polyline points="14 2 14 8 20 8"></polyline>
                    <line x1="16" y1="13" x2="8" y2="13"></line>
                    <line x1="16" y1="17" x2="8" y2="17"></line>
                    <polyline points="10 9 9 9 8 9"></polyline>
                  </svg>
                </div>
                <h4>Document Requirements</h4>
                <p>Comprehensive documentation of edge cases, risks, and success criteria</p>
              </div>
            </div>
          </div>

          <div class="step-item">
            <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
              <div style="width:40px;height:40px;display:grid;place-items:center;border:1px solid var(--accent);background:var(--accent-bg);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="3" y1="9" x2="21" y2="9"></line>
                  <line x1="9" y1="21" x2="9" y2="9"></line>
                </svg>
              </div>
              <strong style="font-size:20px;">Designing Test Scenarios</strong>
            </div>
            <p style="color:var(--muted);margin-bottom:32px;">We create comprehensive test scenarios that cover your critical paths, edge cases, and failure modes.</p>
            
            <div class="scenario-animation">
              <div class="scenario-flow">
                <div class="scenario-card-stack">
                  <div class="card-shadow card-shadow-2"></div>
                  <div class="card-shadow card-shadow-1"></div>
                  <div class="scenario-box" id="scenario-box">
                    <div class="scenario-header">Scenario</div>
                    <div class="scenario-content">
                      <span class="scenario-text">Fetch all risk reports and summarize the main points</span>
                    </div>
                  </div>
                </div>

                <div class="flow-arrow">
                  <div class="arrow-line"></div>
                  <div class="arrow-head"></div>
                </div>

                <div class="agent-box">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5">
                    <rect x="4" y="4" width="16" height="16" rx="2" ry="2"></rect>
                    <circle cx="9" cy="10" r="1" fill="var(--accent)"></circle>
                    <circle cx="15" cy="10" r="1" fill="var(--accent)"></circle>
                    <path d="M9 14h6" stroke-linecap="round"></path>
                  </svg>
                  <span>Agent</span>
                </div>

                <div class="outcome-arrows">
                  <div class="outcome-branch success-branch" id="success-branch">
                    <div class="outcome-arrow success-arrow">
                      <div class="arrow-line"></div>
                      <div class="arrow-head"></div>
                    </div>
                    <div class="outcome-label success-label">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <polyline points="20 6 9 17 4 12"></polyline>
                      </svg>
                      Success
                    </div>
                  </div>

                  <div class="outcome-branch failure-branch" id="failure-branch">
                    <div class="outcome-arrow failure-arrow">
                      <div class="arrow-line"></div>
                      <div class="arrow-head"></div>
                    </div>
                    <div class="outcome-label failure-label">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                      </svg>
                      Failure
                    </div>
                  </div>
                </div>
              </div>

              <div class="failure-cases" id="failure-cases">
                <!-- Failure case cards will be dynamically added here -->
              </div>

              <p class="scenario-caption">Detect failure cases before going into production</p>
            </div>
          </div>

          <div class="step-item" style="border-bottom:none;">
            <div style="display:flex;align-items:center;gap:16px;margin-bottom:16px;">
              <div style="width:40px;height:40px;display:grid;place-items:center;border:1px solid var(--accent);background:var(--accent-bg);">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
              </div>
              <strong style="font-size:20px;">Building the Testing Infrastructure</strong>
            </div>
            <p style="color:var(--muted);margin-bottom:32px;">We develop a robust simulation environment and evaluation framework tailored to your needs.</p>
            
            <div class="infrastructure-section">
              <div class="pipeline-flow">
                <div class="pipeline-step">
                  <div class="pipeline-icon code-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="16 18 22 12 16 6"></polyline>
                      <polyline points="8 6 2 12 8 18"></polyline>
                    </svg>
                  </div>
                  <span>Agent Development</span>
                </div>

                <div class="pipeline-arrow-wrapper">
                  <div class="arrow-line"></div>
                  <div class="arrow-head"></div>
                </div>

                <div class="pipeline-step highlighted">
                  <div class="pipeline-icon test-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                    </svg>
                  </div>
                  <span>CI + Testing</span>
                </div>

                <div class="pipeline-arrow-wrapper">
                  <div class="arrow-line"></div>
                  <div class="arrow-head"></div>
                </div>

                <div class="pipeline-step">
                  <div class="pipeline-icon deploy-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                      <circle cx="12" cy="12" r="10"></circle>
                      <polyline points="10 8 16 12 10 16"></polyline>
                    </svg>
                  </div>
                  <span>Deployment</span>
                </div>
              </div>

              <div class="infrastructure-preview" id="infrastructure-preview">
                <img src="/incidents.png" alt="Testing Dashboard" />
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Pricing/Contact Section -->
    <section id="pricing" class="section" style="padding-top:40px;padding-bottom:80px;">
      <div class="container">
        <div style="text-align:center;max-width:800px;margin:0 auto;">
          <h2 style="margin-bottom:24px;">Ready to test with confidence?</h2>
          <p style="color:var(--muted);font-size:18px;line-height:1.7;margin-bottom:40px;">
            Whether you're launching your first conversational AI agent or scaling to millions of users, 
            we'll help you build the testing infrastructure you need.
          </p>
          <div style="display:flex;gap:16px;justify-content:center;flex-wrap:wrap;">
            <a href="https://calendly.com/founders-pharmie/aniruddh-1-1" target="_blank" rel="noopener noreferrer" class="cta-button primary">
              Schedule a Consultation
            </a>
            <a href="mailto:aniruddh@pharmie.app" class="cta-button secondary">
              Email Us
            </a>
          </div>
        </div>
      </div>
    </section>

  </main>
  <Footer />
</BaseLayout>

<style>
  #hero::before {
    opacity: 0 !important;
  }
  
  /* Extended borders for hero box */
  .hero-box::before,
  .hero-box::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    height: 1px;
    background: var(--border);
    z-index: -1;
  }
  
  .hero-box::before {
    top: -1px;
  }
  
  .hero-box::after {
    bottom: -1px;
  }

  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  /* Extended borders for how box */
  .how-box::before,
  .how-box::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    width: 100vw;
    height: 1px;
    background: var(--border);
    z-index: -1;
  }
  
  .how-box::before {
    top: -1px;
  }
  
  .how-box::after {
    bottom: -1px;
  }

  .step-item {
    padding: 64px;
    border-bottom: 1px solid var(--border);
  }

  /* Discovery Steps */
  .discovery-steps {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  .discovery-card {
    border: 1px solid var(--border-bright);
    padding: 32px 24px;
    background: var(--features-box-bg);
    transition: all 0.3s ease;
    text-align: center;
  }

  .discovery-card:hover {
    border-color: var(--accent);
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 229, 255, 0.15);
  }

  .discovery-icon {
    width: 56px;
    height: 56px;
    margin: 0 auto 20px;
    display: grid;
    place-items: center;
    border: 1px solid var(--accent);
    background: var(--accent-bg);
    transition: all 0.3s ease;
  }

  .discovery-card:hover .discovery-icon {
    background: var(--accent);
  }

  .discovery-card:hover .discovery-icon svg {
    stroke: var(--btn-primary-text);
  }

  .discovery-card h4 {
    font-size: 16px;
    margin-bottom: 12px;
    color: var(--fg);
  }

  .discovery-card p {
    font-size: 14px;
    color: var(--muted);
    margin: 0;
    line-height: 1.6;
  }

  /* Scenario Animation */
  .scenario-animation {
    padding: 48px 24px;
  }

  .scenario-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 32px;
    margin-bottom: 40px;
    min-height: 240px;
  }

  /* Card Stack Effect */
  .scenario-card-stack {
    position: relative;
    min-width: 320px;
    max-width: 320px;
  }

  .card-shadow {
    position: absolute;
    width: 100%;
    height: 100%;
    background: var(--box-bg);
    border: 2px solid var(--border-bright);
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 4px;
  }

  .card-shadow-1 {
    transform: translate(-4px, -4px);
    opacity: 0.5;
    z-index: 0;
  }

  .card-shadow-2 {
    transform: translate(-8px, -8px);
    opacity: 0.25;
    z-index: -1;
  }

  .scenario-box {
    position: relative;
    border: 2px solid var(--border-bright);
    background: var(--box-bg);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    z-index: 1;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    border-radius: 4px;
    overflow: hidden;
  }

  .scenario-header {
    padding: 12px 20px;
    background: linear-gradient(135deg, rgba(0, 229, 255, 0.1) 0%, rgba(0, 229, 255, 0.05) 100%);
    border-bottom: 1px solid var(--accent);
    font-size: 13px;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-family: 'Space Grotesk', monospace;
  }

  .scenario-content {
    padding: 24px 20px;
  }

  .scenario-text {
    font-size: 15px;
    color: var(--fg);
    line-height: 1.7;
    font-family: inherit;
  }

  /* Improved Flow Arrows */
  .flow-arrow {
    display: flex;
    align-items: center;
    gap: 0;
    position: relative;
  }

  .flow-arrow .arrow-line {
    width: 50px;
    height: 2px;
    background: var(--muted);
    transition: background 0.3s ease;
  }

  .flow-arrow .arrow-head {
    width: 0;
    height: 0;
    border-left: 8px solid var(--muted);
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
    transition: border-left-color 0.3s ease;
  }

  .agent-box {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 24px;
    border: 2px solid var(--accent);
    background: var(--accent-bg);
    box-shadow: 0 4px 12px rgba(0, 229, 255, 0.15);
  }

  .agent-box span {
    font-size: 12px;
    font-weight: 700;
    color: var(--accent);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    font-family: 'Space Grotesk', monospace;
  }

  .outcome-arrows {
    display: flex;
    flex-direction: column;
    gap: 28px;
    position: relative;
  }

  .outcome-branch {
    display: flex;
    align-items: center;
    gap: 0;
    opacity: 1;
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .outcome-branch .outcome-arrow,
  .outcome-branch .outcome-label {
    opacity: 0.25;
    transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .outcome-branch.active .outcome-arrow,
  .outcome-branch.active .outcome-label {
    opacity: 1;
  }

  .scenario-box,
  .scenario-text {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Outcome Arrows */
  .outcome-arrow {
    display: flex;
    align-items: center;
    position: relative;
    margin-right: 12px;
  }

  .success-arrow .arrow-line {
    width: 60px;
    height: 2px;
    background: #22c55e;
  }

  .success-arrow .arrow-head {
    width: 0;
    height: 0;
    border-left: 10px solid #22c55e;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
  }

  .failure-arrow .arrow-line {
    width: 60px;
    height: 2px;
    background: #ef4444;
  }

  .failure-arrow .arrow-head {
    width: 0;
    height: 0;
    border-left: 10px solid #ef4444;
    border-top: 7px solid transparent;
    border-bottom: 7px solid transparent;
  }

  .outcome-label {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 700;
    padding: 10px 20px;
    border: 2px solid;
    background: var(--box-bg);
    white-space: nowrap;
    font-family: 'Space Grotesk', monospace;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }

  .success-label {
    border-color: #22c55e;
    color: #22c55e;
    background: rgba(34, 197, 94, 0.05);
  }

  .failure-label {
    border-color: #ef4444;
    color: #ef4444;
    background: rgba(239, 68, 68, 0.05);
  }

  .failure-cases {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    min-height: 80px;
    margin-bottom: 24px;
    justify-content: center;
  }

  .failure-case-card {
    display: flex !important;
    align-items: center;
    gap: 10px;
    padding: 12px 18px 12px 14px;
    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(239, 68, 68, 0.08) 100%);
    border: 2px solid #ef4444;
    border-radius: 8px;
    animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
    position: relative;
    transition: all 0.2s ease;
  }

  .failure-case-card .error-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 22px;
    height: 22px;
    background: #ef4444;
    color: white;
    font-size: 13px;
    font-weight: 700;
    border-radius: 50%;
    flex-shrink: 0;
    line-height: 1;
  }

  .failure-case-card .error-text {
    font-size: 14px;
    font-weight: 600;
    color: #ef4444;
    font-family: 'Space Grotesk', monospace;
    text-transform: none;
    letter-spacing: 0.02em;
  }

  .failure-case-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(239, 68, 68, 0.35);
  }

  @keyframes popIn {
    from {
      opacity: 0;
      transform: scale(0.85) translateY(12px);
    }
    to {
      opacity: 1;
      transform: scale(1) translateY(0);
    }
  }

  .scenario-caption {
    text-align: center;
    color: var(--muted);
    font-size: 16px;
    margin: 0;
    font-weight: 500;
  }

  /* Infrastructure Section */
  .infrastructure-section {
    display: flex;
    flex-direction: column;
    gap: 48px;
  }

  .pipeline-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 24px;
    flex-wrap: wrap;
  }

  .pipeline-step {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
    padding: 32px 40px;
    border: 2px solid var(--border-bright);
    background: var(--box-bg);
    min-width: 180px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  }

  .pipeline-step:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .pipeline-step.highlighted {
    border-color: var(--accent);
    background: var(--accent-bg);
    box-shadow: 0 0 40px rgba(0, 229, 255, 0.4), 0 4px 20px rgba(0, 229, 255, 0.2);
  }

  .pipeline-step.highlighted:hover {
    box-shadow: 0 0 50px rgba(0, 229, 255, 0.5), 0 8px 24px rgba(0, 229, 255, 0.3);
  }

  .pipeline-step span {
    font-size: 15px;
    font-weight: 700;
    color: var(--fg);
    text-align: center;
    font-family: 'Space Grotesk', monospace;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .pipeline-step.highlighted span {
    color: var(--accent);
  }

  .pipeline-icon {
    width: 56px;
    height: 56px;
    display: grid;
    place-items: center;
    color: var(--muted);
    transition: all 0.3s ease;
  }

  .pipeline-step.highlighted .pipeline-icon {
    color: var(--accent);
  }

  /* Animated Icons */
  .code-icon {
    animation: pulse 2s ease-in-out infinite;
  }

  .test-icon {
    animation: bounce 2s ease-in-out infinite;
  }

  .deploy-icon {
    animation: rotate 3s linear infinite;
  }

  @keyframes pulse {
    0%, 100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.1);
      opacity: 0.8;
    }
  }

  @keyframes bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-8px);
    }
  }

  @keyframes rotate {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  /* Pipeline Arrows */
  .pipeline-arrow-wrapper {
    display: flex;
    align-items: center;
    gap: 0;
  }

  .pipeline-arrow-wrapper .arrow-line {
    width: 50px;
    height: 2px;
    background: var(--border-bright);
  }

  .pipeline-arrow-wrapper .arrow-head {
    width: 0;
    height: 0;
    border-left: 8px solid var(--border-bright);
    border-top: 6px solid transparent;
    border-bottom: 6px solid transparent;
  }

  .infrastructure-preview {
    border: 1px solid var(--border-bright);
    overflow: hidden;
    background: var(--box-bg);
  }

  .infrastructure-preview img {
    width: 100%;
    height: auto;
    display: block;
    transition: opacity 0.3s ease;
  }

  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 16px 32px;
    font-size: 16px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-family: 'Space Grotesk', monospace;
  }

  .cta-button.primary {
    background: var(--accent);
    color: var(--btn-primary-text);
    border: 1px solid var(--accent);
  }

  .cta-button.primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px var(--ring);
  }

  .cta-button.secondary {
    background: transparent;
    color: var(--fg);
    border: 1px solid var(--border-bright);
  }

  .cta-button.secondary:hover {
    border-color: var(--accent);
    transform: translateY(-2px);
  }

  @media (max-width: 968px) {
    #hero > .container > div {
      grid-template-columns: 1fr !important;
    }
  }

  @media (max-width: 768px) {
    #hero {
      padding-top: 120px !important;
    }
    
    .step-item {
      padding: 40px 32px;
    }

    .cta-button {
      width: 100%;
      justify-content: center;
    }

    .discovery-steps {
      grid-template-columns: 1fr;
    }

    .scenario-animation {
      padding: 32px 24px;
    }

    .scenario-flow {
      flex-direction: column;
      gap: 16px;
    }

    .scenario-box {
      min-width: 100%;
      max-width: 100%;
    }

    .flow-arrow {
      transform: rotate(90deg);
    }

    .outcome-arrows {
      flex-direction: row;
      gap: 16px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .outcome-arrow {
      transform: rotate(90deg);
    }

    .pipeline-flow {
      flex-direction: column;
    }

    .pipeline-arrow-wrapper {
      transform: rotate(90deg);
    }

    .pipeline-step {
      min-width: 100%;
    }
  }
</style>

<script>
  // Typing effect
  const typedTextElement = document.getElementById('typed-text');
  const cursorElement = document.getElementById('cursor');
  
  if (typedTextElement) {
    const textArray = ['Test before you ship.'];
    let textIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    const typingSpeed = 80;
    const deletingSpeed = 40;
    const pauseDuration = 2000;

    function type() {
      if (!typedTextElement) return;
      const currentText = textArray[textIndex];
      
      if (isDeleting) {
        typedTextElement.textContent = currentText.substring(0, charIndex - 1);
        charIndex--;
        
        if (charIndex === 0) {
          isDeleting = false;
          textIndex = (textIndex + 1) % textArray.length;
          setTimeout(type, 500);
          return;
        }
        setTimeout(type, deletingSpeed);
      } else {
        typedTextElement.textContent = currentText.substring(0, charIndex + 1);
        charIndex++;
        
        if (charIndex === currentText.length) {
          setTimeout(type, pauseDuration);
          return;
        }
        setTimeout(type, typingSpeed);
      }
    }

    // Start typing effect after a short delay
    setTimeout(type, 500);
  }

  // Scenario Animation
  const scenarios = [
    { text: "Fetch all risk reports and summarize the main points", success: true },
    { text: "Cancel my subscription and process refund", success: false, failures: ["Refund API timeout", "Missing cancellation reason"] },
    { text: "Book a flight from NYC to London for next Tuesday", success: true },
    { text: "Generate quarterly financial report with charts", success: false, failures: ["Data access denied", "Chart rendering failed", "Invalid date range"] },
    { text: "Update user preferences for notification settings", success: true },
    { text: "Process payment for order #12345", success: false, failures: ["Payment gateway error", "Insufficient balance check failed"] },
    { text: "Schedule a meeting with the engineering team", success: true },
    { text: "Export user data in CSV format", success: false, failures: ["Memory limit exceeded", "Missing required fields"] },
    { text: "Search for available hotel rooms in Paris", success: true },
    { text: "Send password reset email to user", success: true }
  ];

  function initScenarioAnimation() {
    const scenarioBox = document.getElementById('scenario-box');
    const scenarioText = scenarioBox?.querySelector('.scenario-text');
    const successBranch = document.getElementById('success-branch');
    const failureBranch = document.getElementById('failure-branch');
    const failureCasesContainer = document.getElementById('failure-cases');
    const infrastructureImg = document.querySelector('#infrastructure-preview img');

    if (!scenarioBox || !scenarioText || !successBranch || !failureBranch || !failureCasesContainer) return;

    let currentIndex = 0;

    // Update theme-based image
    function updateInfrastructureImage() {
      if (!infrastructureImg || !(infrastructureImg instanceof HTMLImageElement)) return;
      const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
      infrastructureImg.src = theme === 'dark' ? '/incidentdark.png' : '/incidents.png';
    }

    updateInfrastructureImage();
    const observer = new MutationObserver(updateInfrastructureImage);
    observer.observe(document.documentElement, {
      attributes: true,
      attributeFilter: ['class']
    });

    function cycleScenario() {
      if (!scenarioBox || !scenarioText || !successBranch || !failureBranch || !failureCasesContainer) return;
      
      const scenario = scenarios[currentIndex];
      
      // Fade out current state
      scenarioBox.style.opacity = '0.5';
      
      setTimeout(() => {
        // Reset states
        successBranch.classList.remove('active');
        failureBranch.classList.remove('active');
        failureCasesContainer.innerHTML = '';

        // Update scenario text
        scenarioText.textContent = scenario.text;
        
        // Fade in
        scenarioBox.style.opacity = '1';

        // Wait a bit then show outcome
        setTimeout(() => {
          if (!scenarioBox || !successBranch || !failureBranch || !failureCasesContainer) return;
          
          if (scenario.success) {
            successBranch.classList.add('active');
          } else {
            failureBranch.classList.add('active');
            
            // Add failure cases one by one
            if (scenario.failures) {
              scenario.failures.forEach((failure, index) => {
                setTimeout(() => {
                  if (!failureCasesContainer) return;
                  
                  const badge = document.createElement('div');
                  badge.style.cssText = `
                    display: inline-flex;
                    align-items: center;
                    gap: 10px;
                    padding: 12px 18px;
                    background: linear-gradient(135deg, rgba(239, 68, 68, 0.12) 0%, rgba(239, 68, 68, 0.08) 100%);
                    border: 2px solid #ef4444;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
                    animation: popIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                    margin: 0 8px 8px 0;
                  `;
                  
                  badge.innerHTML = `
                    <span style="
                      display: flex;
                      align-items: center;
                      justify-content: center;
                      width: 22px;
                      height: 22px;
                      background: #ef4444;
                      color: white;
                      font-size: 13px;
                      font-weight: 700;
                      border-radius: 50%;
                      flex-shrink: 0;
                    ">✕</span>
                    <span style="
                      font-size: 14px;
                      font-weight: 600;
                      color: #ef4444;
                      font-family: 'Space Grotesk', monospace;
                    ">${failure}</span>
                  `;
                  
                  failureCasesContainer.appendChild(badge);
                }, index * 250);
              });
            }
          }
        }, 400);
      }, 200);

      // Move to next scenario
      currentIndex = (currentIndex + 1) % scenarios.length;
    }

    // Start cycling
    cycleScenario();
    setInterval(cycleScenario, 3500);
  }

  // Initialize on load
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initScenarioAnimation);
  } else {
    initScenarioAnimation();
  }

  // Re-initialize after navigation
  document.addEventListener('astro:after-swap', initScenarioAnimation);
</script>

